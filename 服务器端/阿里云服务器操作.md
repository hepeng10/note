# 安装 node 环境
[手动部署Node.js环境](https://help.aliyun.com/zh/ecs/user-guide/manually-deploy-a-node-js-environment?spm=a2c4g.11186623.help-menu-25365.d_0_10_5_5_1.68f746216noDvT&scm=20140722.H_50775._.OR_help-T_cn~zh-V_1)

# 上传项目
将项目目录上传到服务器，如 ~/www 目录，然后安装依赖后运行项目，通过 ip+端口 来访问项目测试是否能正常访问。

# PM2
使用 PM2 启动项目：
`pm2 start npm --name "www" -- run start`
www 是项目名称，根据实际项目名称修改。
run start 就是 npm run start。

之后就可以使用 `pm2 list` 来查看项目是否启动成功。`pm2 stop www` 来停止项目。`pm2 start www` 来启动项目。`pm2 restart www` 来重启项目。

# nginx
**注意：如果安装nginx后无法通过ip访问服务器80端口的nginx页面，运行了下方的启动nginx等命令后也不行，阿里云端口配置里允许了80端口也不行，那么重启下服务器试试。**
安装：`sudo yum -y install nginx`
查看：`nginx -v`
启动：`sudo systemctl start nginx`
开机启动：`sudo systemctl enable nginx.service`
查看配置文件路径：`sudo nginx -t` 后有一行类似 `nginx: the configuration file /etc/nginx/nginx.conf syntax is ok` 表示配置文件路径为 `/etc/nginx/nginx.conf`。
添加配置：在 `/etc/nginx/conf.d` 目录下添加一个配置文件，例如 www.conf，内容如下：
```nginx
server {
    # 监听 80 端口
    listen 80;
    # 名称随便取
    server_name www;

    # 配置反向代理，将请求转发到本地的 9000 端口
    location / {
        proxy_pass http://127.0.0.1:9000;
    }
}
```
然后在 nginx.conf 的 http 块中添加如下内容：
```nginx
include /etc/nginx/conf.d/*.conf;
```
**注意：可以直接修改 nginx.conf 文件，不过要使用sudo权限运行 `sudo vi nginx.conf` 来编辑，修改完成后运行 `sudo nginx -t` 来检查配置是否正确，正确后运行 `sudo systemctl reload nginx.service` 来重启 nginx。重启后不生效可以尝试重启下服务器。**
## nginx 其它命令
查看状态：`sudo systemctl status nginx.service`
重启：`sudo systemctl reload nginx.service`
停止：`sudo systemctl stop nginx.service`