# path
[浅析 NodeJs 的几种文件路径](https://github.com/imsobear/blog/issues/48)

默认情况下，路径不是相对于文件路径解析的，而是相对于工作目录解析的。

假如我们有这样的文件结构：
```
app/
    -lib/
        -common.js
    -model
        -task.js
        -test.js
```
在 task.js 里编写如下的代码：
```js
var path = require('path');

console.log(__dirname);
console.log(__filename);
console.log(process.cwd());
console.log(path.resolve('./'));
```
在 model 目录下运行 node task.js 得到的输出是：
```
/Users/guo/Sites/learn/app/model
/Users/guo/Sites/learn/app/model/task.js
/Users/guo/Sites/learn/app/model
/Users/guo/Sites/learn/app/model
```
然后在 app 目录下运行 node model/task.js，得到的输出是：
```
/Users/guo/Sites/learn/app/model
/Users/guo/Sites/learn/app/model/task.js
/Users/guo/Sites/learn/app
/Users/guo/Sites/learn/app
```
可以看出使用 __dirname 和 __filename 的路径是没变的，而使用 path.resolve('/') 路径变了。这就可能是引起 BUG 的隐患因素。
所以我们在使用 path.resolve 时通常会配合 __dirname 使用，如：
```js
path.resolve(__dirname, '../lib/common.js');
```

### path.join()
在拼接路径的时候，建议使用 path.join() 进行拼接，可以避免多余的 / 等问题产生的错误。
```js
// 我们手动拼接，可能出现多了或少了 / 的情况
let path = '/src' + '/container' + 'Frame';
// 使用 path.join() 就不存在这个问题了。少写或多写斜杠，内部都会帮忙处理。
path.join('/src', 'container', '/Frame', 'Head');
```